<script>
/* SCRATCH MESSAGES â€“ 10 CARDS */
const messages=[
  "You are my heartbeat â¤ï¸",
  "Forever us ðŸ’‘",
  "Love feels safe ðŸ«¶",
  "My favorite person ðŸ’–",
  "Always you ðŸ’",
  "Red hearts & promises â¤ï¸",
  "Still choosing you âœ¨",
  "My calm ðŸŒ™",
  "Endless love â™¾ï¸",
  "Final surprise ðŸ’›"
];

const grid=document.getElementById("grid");
let cleared=0;
const scratchSound=document.getElementById("scratchSound");
const ding=document.getElementById("dingSound");

messages.forEach(text=>{
  const card=document.createElement("div");
  card.className="card";

  const msg=document.createElement("div");
  msg.className="msg";
  msg.innerText=text;

  const layer=document.createElement("div");
  layer.className="scratch";

  let revealed = false;   // ðŸ”’ IMPORTANT FLAG

  function reveal(){
    if(revealed) return;  // prevent double count
    revealed = true;

    layer.style.opacity="0";
    scratchSound.currentTime=0;
    scratchSound.volume=0.3;
    scratchSound.play().catch(()=>{});

    cleared++;

    if(cleared === messages.length){
      ding.play().catch(()=>{});
      document.getElementById("ticket").style.display="block";
    }
  }

  /* âœ… USE POINTER EVENTS (BEST FOR MOBILE) */
  layer.addEventListener("pointerdown", reveal);

  card.appendChild(msg);
  card.appendChild(layer);
  grid.appendChild(card);
});
</script>
